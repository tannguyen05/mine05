<% include ../layouts/admin_header.ejs %>
    <h2 class="page-title">All pages</h2>
    <a href="/admin/add-page" class="btn btn-primary" style="margin: 20px 0 20px 0;">New page</a>
    <div id="notice">
    <% if (message.length > 0) { %>
        <div class="alert alert-success"><%=message[0] %></div>
    <% } %>
    </div>
    <script>
        setTimeout(()=>{
            document.getElementById("notice").innerHTML="";
            },3000);
    </script>
    <% if(pages.length > 0) {%>
    <table class="table table-hover text-center">
        <thead>
            <tr>
                <th width="5%">#</th>
                <th width="15%">Title</th>
                <th width="30%">Edit</th>
                <th width="30%">Remove</th>
            </tr>
        </thead>
        <tbody>
        <% pages.map((data, index)=>{%> 
            <tr>
                <td width="10%"><%= index+1 %></td>
                <td width="30%"><%= data.title %></td>
                <td width="30%"><a href="/admin/update-page/<%= data._id%>" class="btn btn-outline-warning mr-sm-2">Edit</a></td>
                <% if(data.slug == "home" ) {%>
                    <td></td>
                <% }else{ %>
                <td width="30%">
                    <form id="detele" action="/admin/delete-page/<%= data._id %>" method="POST">
                        <button type="submit" class="btn btn-outline-danger" onclick="return confirm('Are you sure you want to delete this item?');">Delete</button>
                    </form>
                </td>
                <% } %>
            </tr>
        <% }) %>
    <% }else{%>
        <h4 class="text-danger text-center">No result found.</h4>
    <% } %>
        </tbody>
    </table>
    
<% include ../layouts/admin_footer.ejs %>